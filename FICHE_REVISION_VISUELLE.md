# ğŸ¨ FICHE DE RÃ‰VISION VISUELLE : Docker + Symfony

---

## ğŸ—ï¸ ARCHITECTURE GLOBALE

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    VOTRE MACHINE (Windows)                            â•‘
â•‘                                                                       â•‘
â•‘   Navigateur Web                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â•‘
â•‘   â”‚localhostâ”‚  â”‚localhostâ”‚  â”‚localhostâ”‚                             â•‘
â•‘   â”‚  :8000  â”‚  â”‚  :8080  â”‚  â”‚  :1080  â”‚                             â•‘
â•‘   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                             â•‘
â•‘        â”‚            â”‚            â”‚                                   â•‘
â•‘   â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â•‘
â•‘                    DOCKER COMPOSE                                     â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘   â”‚                                                               â”‚  â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â•‘
â•‘   â”‚  â”‚   PHP 8.3    â”‚         â”‚   MySQL 8.0  â”‚                  â”‚  â•‘
â•‘   â”‚  â”‚  + Apache    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚     (db)     â”‚                  â”‚  â•‘
â•‘   â”‚  â”‚              â”‚  SQL    â”‚              â”‚                  â”‚  â•‘
â•‘   â”‚  â”‚  Container 1 â”‚         â”‚  Container 2 â”‚                  â”‚  â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â•‘
â•‘   â”‚         â”‚                         â”‚                          â”‚  â•‘
â•‘   â”‚         â”‚                         â”‚                          â”‚  â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â•‘
â•‘   â”‚  â”‚   MailHog    â”‚         â”‚  phpMyAdmin  â”‚                  â”‚  â•‘
â•‘   â”‚  â”‚              â”‚         â”‚              â”‚                  â”‚  â•‘
â•‘   â”‚  â”‚  Container 3 â”‚         â”‚  Container 4 â”‚                  â”‚  â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â•‘
â•‘   â”‚                                                               â”‚  â•‘
â•‘   â”‚              symfony_network (bridge)                        â”‚  â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                                                                       â•‘
â•‘   Volumes synchronisÃ©s:                                               â•‘
â•‘   ğŸ“ ./symfony â—„â”€â”€â”€â”€â”€â”€â–º /var/www/html (dans container PHP)           â•‘
â•‘   ğŸ’¾ db_data (donnÃ©es MySQL persistantes)                             â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ FLUX D'UNE REQUÃŠTE HTTP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUÃŠTE : GET /users                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Utilisateur tape : http://localhost:8000/users
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Navigateur    â”‚
    â”‚    (Chrome)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP Request
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Port 8000      â”‚  â—„â”€â”€â”€ Mapping : 8000 (local) â†’ 80 (container)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         CONTAINER PHP (symfony_php)                                â•‘
â•‘                                                                    â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â•‘
â•‘   â”‚  Apache :80    â”‚  â—„â”€â”€â”€ ReÃ§oit la requÃªte                     â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â•‘
â•‘           â”‚                                                        â•‘
â•‘           â–¼                                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â•‘
â•‘   â”‚  /var/www/html/public/index.php   â”‚  â—„â”€â”€â”€ Front Controller   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â•‘
â•‘           â”‚                                                        â•‘
â•‘           â–¼                                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â•‘
â•‘   â”‚ Symfony Kernel â”‚  â—„â”€â”€â”€ Analyse la route "/users"             â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â•‘
â•‘           â”‚                                                        â•‘
â•‘           â–¼                                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â•‘
â•‘   â”‚  Controller    â”‚  â—„â”€â”€â”€ UserController::index()               â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â•‘
â•‘           â”‚                                                        â•‘
â•‘           â–¼                                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â•‘
â•‘   â”‚ Doctrine ORM   â”‚  â—„â”€â”€â”€ $userRepository->findAll()            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â•‘
â•‘           â”‚ SQL: SELECT * FROM users                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â”‚ Via rÃ©seau Docker (symfony_network)
            â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         CONTAINER MYSQL (symfony_db)                              â•‘
â•‘                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â•‘
â•‘   â”‚  MySQL :3306   â”‚  â—„â”€â”€â”€ Hostname: "db" (pas localhost!)      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â•‘
â•‘           â”‚                                                       â•‘
â•‘           â–¼                                                       â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â•‘
â•‘   â”‚ symfony_db     â”‚  â—„â”€â”€â”€ ExÃ©cute la requÃªte SQL               â•‘
â•‘   â”‚  Table: users  â”‚                                             â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â•‘
â•‘           â”‚                                                       â•‘
â•‘           â”‚ RÃ©sultat : [user1, user2, user3, ...]               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â”‚ DonnÃ©es retournÃ©es
            â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         CONTAINER PHP (symfony_php)                               â•‘
â•‘                                                                   â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â•‘
â•‘   â”‚  Controller    â”‚  â—„â”€â”€â”€ ReÃ§oit les donnÃ©es                   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â•‘
â•‘           â”‚                                                       â•‘
â•‘           â–¼                                                       â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â•‘
â•‘   â”‚     Twig       â”‚  â—„â”€â”€â”€ GÃ©nÃ¨re le HTML                       â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â•‘
â•‘           â”‚                                                       â•‘
â•‘           â”‚ HTML                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Navigateur    â”‚  â—„â”€â”€â”€ Affiche la liste des users
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ CARTE DES PORTS

```
VOTRE MACHINE                    CONTAINERS DOCKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Port 8000  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  PHP Container (Port 80)
  â”‚                                     â”‚
  â””â”€â–º http://localhost:8000             â””â”€â–º Apache Ã©coute sur :80


Port 8080  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  phpMyAdmin (Port 80)
  â”‚                                     â”‚
  â””â”€â–º http://localhost:8080             â””â”€â–º Interface web


Port 8025  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  MailHog (Port 8025)
  â”‚                                     â”‚
  â””â”€â–º http://localhost:8025             â””â”€â–º Interface web emails


Port 1025  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  MailHog (Port 1025)
  â”‚                                     â”‚
  â””â”€â–º Serveur SMTP                      â””â”€â–º Serveur SMTP


Port 3306  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  MySQL (Port 3306)
  â”‚                                     â”‚
  â””â”€â–º AccÃ¨s direct MySQL                â””â”€â–º Base de donnÃ©es
      (optionnel)
```

---

## ğŸ§© COMMUNICATION ENTRE SERVICES

### âŒ CE QUI NE FONCTIONNE PAS

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Container PHP essaie de se connecter Ã  localhost:3306           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Container PHP   â”‚
â”‚                  â”‚
â”‚  DATABASE_URL=   â”‚
â”‚  @localhost:3306 â”‚  â”€â”€â”€Xâ”€â”€â”€â–º  Cherche MySQL sur son propre
â”‚                  â”‚             localhost = Ã‰CHEC !
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container MySQL  â”‚  â—„â”€â”€â”€ MySQL est ICI, pas dans le container PHP
â”‚   Port 3306      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ Erreur : "Connection refused"
```

### âœ… CE QUI FONCTIONNE

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Container PHP utilise le nom du service : "db"                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              symfony_network
â”‚  Container PHP   â”‚              (rÃ©seau Docker)
â”‚                  â”‚                     â”‚
â”‚  DATABASE_URL=   â”‚                     â”‚
â”‚  @db:3306        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ DNS Docker rÃ©sout
â”‚                  â”‚         âœ“           â”‚ "db" â†’ adresse IP
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ du container MySQL
                                         â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Container MySQL  â”‚
                              â”‚  Hostname: "db"  â”‚
                              â”‚   Port 3306      â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Connexion rÃ©ussie !
```

---

## ğŸ“¦ ANATOMIE D'UN VOLUME

### Volume Bind Mount (Code source)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  SYNCHRONISATION EN TEMPS RÃ‰EL                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VOTRE MACHINE                          CONTAINER PHP
â•â•â•â•â•â•â•â•â•â•â•â•â•                          â•â•â•â•â•â•â•â•â•â•â•â•â•

C:\MAMP\htdocs\                        /var/www/html/
Sprint-MiniRSN\symfony\

â”œâ”€â”€ src/                 â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Controller/                    â”‚   â”œâ”€â”€ Controller/
â”‚   â”‚   â””â”€â”€ UserController.php         â”‚   â”‚   â””â”€â”€ UserController.php
â”‚   â””â”€â”€ Entity/                        â”‚   â””â”€â”€ Entity/
â”‚       â””â”€â”€ User.php                   â”‚       â””â”€â”€ User.php
â”‚                                      â”‚
â”œâ”€â”€ public/              â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.php                      â”‚   â””â”€â”€ index.php
â”‚                                      â”‚
â”œâ”€â”€ config/              â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”œâ”€â”€ config/
    â””â”€â”€ packages/                          â””â”€â”€ packages/

    Vous Ã©ditez un fichier    â”€â”€â”€â–º    Changement visible
    avec VSCode sur Windows            immÃ©diatement dans
                                       le container !
```

### Volume NommÃ© (Base de donnÃ©es)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  PERSISTANCE DES DONNÃ‰ES                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONTAINER MYSQL                    VOLUME DOCKER (db_data)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/var/lib/mysql/                    StockÃ© par Docker dans :
â”œâ”€â”€ symfony_db/    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º C:\ProgramData\docker\
â”‚   â”œâ”€â”€ users.ibd                  volumes\db_data\
â”‚   â”œâ”€â”€ posts.ibd
â”‚   â””â”€â”€ ...                        âœ… Survit Ã  la suppression
â”‚                                     du container !
â””â”€â”€ mysql/
    â””â”€â”€ ...

Cycle de vie :

1. Container crÃ©Ã©        2. DonnÃ©es Ã©crites      3. Container supprimÃ©
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MySQL   â”‚            â”‚  MySQL   â”‚            â”‚    ğŸ’€    â”‚
   â”‚          â”‚  â”€â”€â”€â”€â”€â–º    â”‚ db_data  â”‚  â”€â”€â”€â”€â”€â–º    â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                                â–¼                        â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
                           â”‚ Volume  â”‚                  â”‚
                           â”‚ db_data â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           âœ… DonnÃ©es
                           conservÃ©es !

4. Nouveau container crÃ©Ã©
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MySQL   â”‚  â—„â”€â”€â”€ RÃ©cupÃ¨re les donnÃ©es du volume
   â”‚          â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Volume  â”‚  âœ… Toutes les donnÃ©es sont lÃ  !
   â”‚ db_data â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ LES 4 SERVICES EN DÃ‰TAIL

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        SERVICE 1 : PHP + APACHE                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    Container: symfony_php               â”‚
    â”‚                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              Apache (Port 80)                    â”‚  â”‚
    â”‚  â”‚  â€¢ ReÃ§oit les requÃªtes HTTP                      â”‚  â”‚
    â”‚  â”‚  â€¢ Sert les fichiers statiques (CSS, JS, img)   â”‚  â”‚
    â”‚  â”‚  â€¢ Passe les .php Ã  PHP-FPM                      â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                    â”‚                                    â”‚
    â”‚                    â–¼                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              PHP 8.3                             â”‚  â”‚
    â”‚  â”‚  â€¢ ExÃ©cute le code Symfony                       â”‚  â”‚
    â”‚  â”‚  â€¢ Extensions : pdo, pdo_mysql, intl, opcache   â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                    â”‚                                    â”‚
    â”‚                    â–¼                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              Symfony 7                           â”‚  â”‚
    â”‚  â”‚  ğŸ“ /var/www/html/                               â”‚  â”‚
    â”‚  â”‚     â”œâ”€â”€ public/index.php (front controller)     â”‚  â”‚
    â”‚  â”‚     â”œâ”€â”€ src/ (votre code)                       â”‚  â”‚
    â”‚  â”‚     â”œâ”€â”€ config/ (configuration)                 â”‚  â”‚
    â”‚  â”‚     â””â”€â”€ var/ (cache, logs)                      â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                         â”‚
    â”‚  ğŸ”Œ ConnectÃ© Ã  : db (MySQL), mailcatcher (SMTP)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    AccÃ¨s : http://localhost:8000


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        SERVICE 2 : MYSQL                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    Container: symfony_db                â”‚
    â”‚                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              MySQL 8.0 (Port 3306)               â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  Hostname dans le rÃ©seau : db                   â”‚  â”‚
    â”‚  â”‚  Root Password : root                           â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  Base de donnÃ©es crÃ©Ã©e : symfony_db             â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  Tables (exemple aprÃ¨s migration) :             â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â”‚  â”‚  â”‚  users                                  â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ id (INT, PRIMARY KEY)              â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ email (VARCHAR)                    â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ password (VARCHAR)                 â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â””â”€â”€ roles (JSON)                       â”‚    â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â”‚  â”‚  â”‚  posts                                  â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ id (INT, PRIMARY KEY)              â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ title (VARCHAR)                    â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ content (TEXT)                     â”‚    â”‚  â”‚
    â”‚  â”‚  â”‚  â””â”€â”€ user_id (INT, FOREIGN KEY)         â”‚    â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                         â”‚
    â”‚  ğŸ’¾ Volume : db_data â†’ /var/lib/mysql                  â”‚
    â”‚     (donnÃ©es persistantes)                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    AccÃ¨s direct (optionnel) : localhost:3306
    AccÃ¨s depuis PHP : db:3306


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      SERVICE 3 : PHPMYADMIN                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 Container: symfony_phpmyadmin           â”‚
    â”‚                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚           Interface Web phpMyAdmin               â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
    â”‚  â”‚  â”‚  ğŸ  Page d'accueil                     â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  Serveur : db:3306                     â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  Login auto : root / root              â”‚     â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
    â”‚  â”‚  â”‚  ğŸ“Š Base de donnÃ©es : symfony_db       â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ Structure (voir les tables)       â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ SQL (exÃ©cuter des requÃªtes)       â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  â”œâ”€â”€ Rechercher                        â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  â””â”€â”€ Exporter                          â”‚     â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  FonctionnalitÃ©s :                              â”‚  â”‚
    â”‚  â”‚  âœ… CrÃ©er/modifier des tables                   â”‚  â”‚
    â”‚  â”‚  âœ… Voir les donnÃ©es                            â”‚  â”‚
    â”‚  â”‚  âœ… ExÃ©cuter des requÃªtes SQL                   â”‚  â”‚
    â”‚  â”‚  âœ… Importer/Exporter des donnÃ©es               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                         â”‚
    â”‚  ğŸ”Œ Se connecte Ã  : db:3306                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    AccÃ¨s : http://localhost:8080


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      SERVICE 4 : MAILHOG                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 Container: symfony_mailhog              â”‚
    â”‚                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚       Serveur SMTP (Port 1025)                   â”‚  â”‚
    â”‚  â”‚  â€¢ Intercepte TOUS les emails                    â”‚  â”‚
    â”‚  â”‚  â€¢ Ne les envoie PAS rÃ©ellement                  â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                    â”‚                                    â”‚
    â”‚                    â–¼                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚       Interface Web (Port 8025)                  â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
    â”‚  â”‚  â”‚  ğŸ“§ BoÃ®te de rÃ©ception                 â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚                                        â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  From: noreply@example.com             â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  To: user@example.com                  â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  Subject: Bienvenue !                  â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  Bonjour et bienvenue...               â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚                                        â”‚     â”‚  â”‚
    â”‚  â”‚  â”‚  [Voir le HTML] [Voir la source]       â”‚     â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
    â”‚  â”‚                                                  â”‚  â”‚
    â”‚  â”‚  Utilisation :                                  â”‚  â”‚
    â”‚  â”‚  â€¢ Tester l'inscription (email de bienvenue)   â”‚  â”‚
    â”‚  â”‚  â€¢ Tester la rÃ©initialisation de mot de passe  â”‚  â”‚
    â”‚  â”‚  â€¢ Voir le rendu HTML des emails               â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                                         â”‚
    â”‚  ğŸ”Œ ReÃ§oit les emails depuis : Container PHP           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Interface web : http://localhost:8025
    SMTP (depuis Symfony) : smtp://mailhog:1025
```

---

## ğŸ”„ CYCLE DE VIE D'UN PROJET

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      1. DÃ‰MARRAGE INITIAL                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal: docker-compose up -d --build

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Lecture du   â”‚
    â”‚ docker-      â”‚
    â”‚ compose.yml  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Construction â”‚   â”€â”€â”€â–º  â”‚  CrÃ©ation    â”‚
    â”‚ des images   â”‚         â”‚  des volumes â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                        â”‚
           â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  DÃ©marrage des 4 containers      â”‚
    â”‚  â”œâ”€â”€ PHP + Apache  (symfony_php) â”‚
    â”‚  â”œâ”€â”€ MySQL         (symfony_db)  â”‚
    â”‚  â”œâ”€â”€ phpMyAdmin                  â”‚
    â”‚  â””â”€â”€ MailCatcher                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CrÃ©ation du  â”‚
    â”‚ rÃ©seau Dockerâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… Environnement prÃªt !                â”‚
    â”‚                                        â”‚
    â”‚ â€¢ http://localhost:8000 (Symfony)     â”‚
    â”‚ â€¢ http://localhost:8080 (phpMyAdmin)  â”‚
    â”‚ â€¢ http://localhost:1080 (MailCatcher) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   2. CRÃ‰ATION DU PROJET SYMFONY                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal: docker-compose exec php composer create-project symfony/skeleton symfony

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Commande exÃ©cutÃ©eâ”‚
    â”‚ DANS le containerâ”‚
    â”‚ PHP              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Composer tÃ©lÃ©charge Symfony         â”‚
    â”‚                                     â”‚
    â”‚ Downloading...                      â”‚
    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 75%            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Structure crÃ©Ã©e dans symfony/       â”‚
    â”‚                                     â”‚
    â”‚ symfony/                            â”‚
    â”‚ â”œâ”€â”€ bin/                            â”‚
    â”‚ â”œâ”€â”€ config/                         â”‚
    â”‚ â”œâ”€â”€ public/                         â”‚
    â”‚ â”‚   â””â”€â”€ index.php                   â”‚
    â”‚ â”œâ”€â”€ src/                            â”‚
    â”‚ â”œâ”€â”€ var/                            â”‚
    â”‚ â”œâ”€â”€ vendor/                         â”‚
    â”‚ â”œâ”€â”€ .env                            â”‚
    â”‚ â””â”€â”€ composer.json                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… Projet Symfony crÃ©Ã© !            â”‚
    â”‚                                     â”‚
    â”‚ AccÃ¨s : http://localhost:8000       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   3. CONFIGURATION DE LA BDD                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰diter: symfony/.env

    Avant (par dÃ©faut) :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DATABASE_URL="postgresql://app:!ChangeMe!@127...  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Modification
             â–¼
    AprÃ¨s :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DATABASE_URL="mysql://root:root@db:3306/symfony_dbâ”‚
    â”‚                                  ^^                â”‚
    â”‚                    Nom du service Docker !         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   4. CRÃ‰ATION D'UNE ENTITÃ‰                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal: docker-compose exec php php bin/console make:entity User

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Maker Bundle     â”‚
    â”‚ dÃ©marre          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Questions interactives :            â”‚
    â”‚                                     â”‚
    â”‚ Property name: email                â”‚
    â”‚ Type: string                        â”‚
    â”‚ Length: 180                         â”‚
    â”‚                                     â”‚
    â”‚ Property name: password             â”‚
    â”‚ Type: string                        â”‚
    â”‚                                     â”‚
    â”‚ Property name: (entrÃ©e vide)        â”‚
    â”‚ âœ… Success!                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fichiers crÃ©Ã©s :                    â”‚
    â”‚                                     â”‚
    â”‚ âœ… src/Entity/User.php               â”‚
    â”‚    (classe avec propriÃ©tÃ©s)         â”‚
    â”‚                                     â”‚
    â”‚ âœ… src/Repository/UserRepository.php â”‚
    â”‚    (requÃªtes DB)                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   5. MIGRATION DE LA BASE DE DONNÃ‰ES              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal: docker-compose exec php php bin/console make:migration

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Doctrine compare â”‚
    â”‚ EntitÃ©s â†” BDD    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DiffÃ©rences dÃ©tectÃ©es :             â”‚
    â”‚                                     â”‚
    â”‚ â€¢ Table "user" n'existe pas         â”‚
    â”‚   â†’ GÃ©nÃ©rer CREATE TABLE            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fichier crÃ©Ã© :                      â”‚
    â”‚ migrations/Version20250113120000.phpâ”‚
    â”‚                                     â”‚
    â”‚ Contient :                          â”‚
    â”‚ CREATE TABLE user (                 â”‚
    â”‚   id INT PRIMARY KEY,               â”‚
    â”‚   email VARCHAR(180),               â”‚
    â”‚   password VARCHAR(255)             â”‚
    â”‚ );                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Terminal: docker-compose exec php php bin/console doctrine:migrations:migrate

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ExÃ©cution de la  â”‚
    â”‚ migration        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Container PHP                       â”‚
    â”‚   â””â”€â–º Connexion Ã  : db:3306         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Container MySQL                     â”‚
    â”‚                                     â”‚
    â”‚ ExÃ©cution SQL :                     â”‚
    â”‚ CREATE TABLE user (...);            â”‚
    â”‚                                     â”‚
    â”‚ âœ… Table "user" crÃ©Ã©e !             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ©rification dans phpMyAdmin (http://localhost:8080) :

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ“Š symfony_db                       â”‚
    â”‚  â””â”€â”€ ğŸ“‹ user                        â”‚
    â”‚       â”œâ”€â”€ id (INT)                  â”‚
    â”‚       â”œâ”€â”€ email (VARCHAR)           â”‚
    â”‚       â””â”€â”€ password (VARCHAR)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ COMMANDES DOCKER : CHEAT SHEET VISUEL

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        GESTION DES CONTAINERS                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose up -d                                           â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º DÃ©marre tous les containers en arriÃ¨re-plan               â”‚
â”‚                                                                 â”‚
â”‚  Ã‰tat : â­• ArrÃªtÃ©  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  ğŸŸ¢ DÃ©marrÃ©                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose ps                                              â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º Liste les containers actifs                               â”‚
â”‚                                                                 â”‚
â”‚  RÃ©sultat :                                                     â”‚
â”‚  NAME                  STATUS       PORTS                       â”‚
â”‚  symfony_php           Up 2 hours   0.0.0.0:8000->80           â”‚
â”‚  symfony_db            Up 2 hours   0.0.0.0:3306->3306         â”‚
â”‚  symfony_phpmyadmin    Up 2 hours   0.0.0.0:8080->80           â”‚
â”‚  symfony_mailhog       Up 2 hours   0.0.0.0:8025->8025         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose stop                                            â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º ArrÃªte les containers (peut les redÃ©marrer)               â”‚
â”‚                                                                 â”‚
â”‚  Ã‰tat : ğŸŸ¢ DÃ©marrÃ©  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  ğŸŸ¡ ArrÃªtÃ© (sauvegardÃ©)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose down                                            â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º ArrÃªte ET supprime les containers                         â”‚
â”‚                                                                 â”‚
â”‚  Ã‰tat : ğŸŸ¢ DÃ©marrÃ©  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â­• SupprimÃ©                 â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸  Les volumes (db_data) sont CONSERVÃ‰S                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose down -v                                         â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º Supprime containers ET volumes                            â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸  ATTENTION : Toutes les donnÃ©es MySQL seront PERDUES !     â”‚
â”‚                                                                 â”‚
â”‚  Ã‰tat : ğŸŸ¢ DÃ©marrÃ©  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  ğŸ’€ Tout supprimÃ©           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     EXÃ‰CUTION DE COMMANDES                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose exec php [commande]                             â”‚
â”‚  â–²                       â–²                                      â”‚
â”‚  â”‚                       â””â”€â–º Commande Ã  exÃ©cuter               â”‚
â”‚  â””â”€â–º Service cible                                              â”‚
â”‚                                                                 â”‚
â”‚  Exemples :                                                     â”‚
â”‚                                                                 â”‚
â”‚  docker-compose exec php composer install                      â”‚
â”‚  docker-compose exec php php bin/console make:entity           â”‚
â”‚  docker-compose exec php php bin/console cache:clear           â”‚
â”‚  docker-compose exec php bash  â—„â”€â”€â”€ Shell interactif           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose logs [service]                                  â”‚
â”‚  â–²                                                              â”‚
â”‚  â””â”€â–º Affiche les logs d'un service                             â”‚
â”‚                                                                 â”‚
â”‚  docker-compose logs php        â—„â”€â”€â”€ Logs PHP/Apache           â”‚
â”‚  docker-compose logs db         â—„â”€â”€â”€ Logs MySQL                â”‚
â”‚  docker-compose logs -f php     â—„â”€â”€â”€ Suivi en temps rÃ©el       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     COMMANDES SYMFONY                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrÃ©er une entitÃ©                                               â”‚
â”‚  docker-compose exec php php bin/console make:entity User       â”‚
â”‚                                                                 â”‚
â”‚  RÃ©sultat : src/Entity/User.php crÃ©Ã©                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrÃ©er une migration                                            â”‚
â”‚  docker-compose exec php php bin/console make:migration         â”‚
â”‚                                                                 â”‚
â”‚  RÃ©sultat : migrations/VersionXXX.php crÃ©Ã©                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExÃ©cuter les migrations                                        â”‚
â”‚  docker-compose exec php php bin/console doctrine:migrations:migrateâ”‚
â”‚                                                                 â”‚
â”‚  RÃ©sultat : Tables crÃ©Ã©es dans MySQL                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrÃ©er un contrÃ´leur                                            â”‚
â”‚  docker-compose exec php php bin/console make:controller        â”‚
â”‚                                                                 â”‚
â”‚  RÃ©sultat : src/Controller/XXXController.php crÃ©Ã©               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vider le cache                                                 â”‚
â”‚  docker-compose exec php php bin/console cache:clear            â”‚
â”‚                                                                 â”‚
â”‚  Utile quand les changements ne sont pas pris en compte        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” DÃ‰BOGAGE VISUEL

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘             PROBLÃˆME : "Connection refused" (MySQL)               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ VÃ©rifier que MySQL est dÃ©marrÃ©

Terminal: docker-compose ps

    Attendu :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NAME         STATUS       PORTS        â”‚
    â”‚ symfony_db   Up 10 min    3306->3306   â”‚  â—„â”€â”€â”€ STATUS doit Ãªtre "Up"
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Si STATUS = "Exit" :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NAME         STATUS       PORTS        â”‚
    â”‚ symfony_db   Exit (1)     -            â”‚  â—„â”€â”€â”€ âŒ Container arrÃªtÃ©
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Solution : docker-compose logs db
               (voir l'erreur dans les logs)


2ï¸âƒ£ VÃ©rifier la configuration Symfony

symfony/.env :

    âŒ Incorrect :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DATABASE_URL="mysql://root:root@localhost:3306   â”‚
    â”‚                                     ^^^^^^^^^    â”‚
    â”‚                                     ERREUR !     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    âœ… Correct :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DATABASE_URL="mysql://root:root@db:3306          â”‚
    â”‚                                     ^^           â”‚
    â”‚                            Nom du service !      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3ï¸âƒ£ Tester la connexion depuis le container PHP

Terminal: docker-compose exec php ping db

    âœ… Si Ã§a fonctionne :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PING db (172.18.0.3): 56 data bytes             â”‚
    â”‚ 64 bytes from 172.18.0.3: icmp_seq=0 ttl=64     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    âŒ Si Ã§a Ã©choue :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ping: unknown host db                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†’ VÃ©rifier que les services sont sur le mÃªme rÃ©seau


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘             PROBLÃˆME : "Page not found" (Symfony)                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ VÃ©rifier l'accÃ¨s Ã  index.php

http://localhost:8000/index.php

    âœ… Si Ã§a fonctionne : problÃ¨me de configuration Apache
    âŒ Si Ã§a Ã©choue : problÃ¨me plus profond


2ï¸âƒ£ VÃ©rifier les logs Apache

Terminal: docker-compose logs php

    Rechercher :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ [php:error] [pid 23] PHP Fatal error:           â”‚
    â”‚ Uncaught Error: Class '...' not found           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3ï¸âƒ£ Vider le cache Symfony

Terminal: docker-compose exec php php bin/console cache:clear


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘             PROBLÃˆME : Changements non pris en compte             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ VÃ©rifier que le volume est bien montÃ©

Terminal: docker-compose exec php ls -la /var/www/html

    âœ… Attendu :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ drwxr-xr-x  src                                  â”‚
    â”‚ drwxr-xr-x  public                               â”‚
    â”‚ -rw-r--r--  .env                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    âŒ Si vide :
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ total 0                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†’ ProblÃ¨me de montage du volume


2ï¸âƒ£ Reconstruire le container

Terminal: docker-compose down
          docker-compose up -d --build
```

---

## ğŸ“Š TABLEAU RÃ‰CAPITULATIF

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      POINTS D'ACCÃˆS                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SERVICE     â”‚         URL          â”‚         USAGE              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Symfony       â”‚ localhost:8000       â”‚ Votre application web      â”‚
â”‚               â”‚                      â”‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ phpMyAdmin    â”‚ localhost:8080       â”‚ Gestion de la BDD          â”‚
â”‚               â”‚ Login: root/root     â”‚ Voir/modifier les tables   â”‚
â”‚               â”‚                      â”‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MailHog       â”‚ localhost:8025       â”‚ Voir les emails interceptÃ©sâ”‚
â”‚               â”‚                      â”‚                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL (direct)â”‚ localhost:3306       â”‚ Connexion directe MySQL    â”‚
â”‚               â”‚ (optionnel)          â”‚ (avec client DB externe)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  HOSTNAMES DANS DOCKER                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SERVICE          â”‚         HOSTNAME (dans le rÃ©seau Docker)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PHP                â”‚ php                                           â”‚
â”‚                    â”‚ (rarement utilisÃ© directement)                â”‚
â”‚                    â”‚                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL              â”‚ db                                            â”‚
â”‚                    â”‚ UtilisÃ© dans DATABASE_URL                     â”‚
â”‚                    â”‚                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ phpMyAdmin         â”‚ phpmyadmin                                    â”‚
â”‚                    â”‚ (rarement utilisÃ©)                            â”‚
â”‚                    â”‚                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MailHog            â”‚ mailhog                                       â”‚
â”‚                    â”‚ UtilisÃ© dans MAILER_DSN                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  CONFIGURATION SYMFONY (.env)                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DATABASE_URL="mysql://root:root@db:3306/symfony_db?serverVersion=8.0"
               â”‚    â”‚    â”‚    â”‚     â”‚    â””â”€â–º Version MySQL
               â”‚    â”‚    â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â–º Nom de la base
               â”‚    â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Port MySQL
               â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â­ Hostname Docker
               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Mot de passe
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Utilisateur

MAILER_DSN=smtp://mailhog:1025
                  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”˜
                       â”‚      â””â”€â”€â–º Port SMTP
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â­ Hostname Docker
```

---

## ğŸ“ QUIZ DE RÃ‰VISION

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        TESTEZ VOS CONNAISSANCES                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â“ Q1 : J'Ã©dite un fichier dans ./symfony/src/Controller/
        Quand le changement est-il visible dans le container ?

    A) AprÃ¨s un redÃ©marrage du container
    B) ImmÃ©diatement (grÃ¢ce au bind mount)
    C) AprÃ¨s reconstruction de l'image

    RÃ©ponse : [ Faites dÃ©filer pour voir ]








    âœ… B) ImmÃ©diatement !
       Le bind mount synchronise en temps rÃ©el.


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â“ Q2 : Je supprime le container MySQL avec "docker-compose down"
        Qu'arrive-t-il aux donnÃ©es ?

    A) Tout est perdu
    B) Les donnÃ©es sont conservÃ©es dans le volume db_data
    C) Ã‡a dÃ©pend de la phase de la lune

    RÃ©ponse : [ Faites dÃ©filer pour voir ]








    âœ… B) Les donnÃ©es sont conservÃ©es !
       Le volume db_data persiste mÃªme aprÃ¨s suppression du container.

       âš ï¸  Sauf si vous utilisez : docker-compose down -v


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â“ Q3 : Dans DATABASE_URL, pourquoi utiliser @db et pas @localhost ?

    SchÃ©ma mental :

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Container PHPâ”‚
    â”‚              â”‚
    â”‚ localhost â”€â”€â”¼â”€â”€â–º Lui-mÃªme (pas MySQL !)
    â”‚              â”‚
    â”‚ db â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Container MySQL âœ…
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    RÃ©ponse :
    Chaque container a son propre "localhost".
    Le nom du service ("db") est rÃ©solu par le DNS Docker
    vers l'adresse IP du container MySQL.


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â“ Q4 : Comment voir les logs d'erreur PHP ?

    RÃ©ponse : [ Faites dÃ©filer pour voir ]








    âœ… docker-compose logs php
       ou
       docker-compose logs -f php (suivi en temps rÃ©el)


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â“ Q5 : Quel est le point d'entrÃ©e de Symfony ?

    A) /var/www/html/index.php
    B) /var/www/html/src/Kernel.php
    C) /var/www/html/public/index.php

    RÃ©ponse : [ Faites dÃ©filer pour voir ]








    âœ… C) /var/www/html/public/index.php

       C'est le "front controller" : toutes les requÃªtes passent par lÃ .
       Apache redirige tout vers ce fichier.
```

---

## ğŸ¯ AIDE-MÃ‰MOIRE : Ã€ IMPRIMER

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    ğŸš€ COMMANDES ESSENTIELLES                     â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

  DÃ‰MARRAGE
  â”€â”€â”€â”€â”€â”€â”€â”€â”€
  docker-compose up -d              DÃ©marrer les containers
  docker-compose ps                 Voir les containers actifs
  docker-compose logs -f php        Voir les logs en temps rÃ©el

  ARRÃŠT
  â”€â”€â”€â”€â”€
  docker-compose stop               ArrÃªter (peut redÃ©marrer)
  docker-compose down               ArrÃªter + supprimer
  docker-compose down -v            âš ï¸ Supprimer + volumes (donnÃ©es !)

  SYMFONY
  â”€â”€â”€â”€â”€â”€â”€
  dc exec php composer require X    Installer un bundle
  dc exec php php bin/console make:entity    CrÃ©er une entitÃ©
  dc exec php php bin/console make:migration CrÃ©er une migration
  dc exec php php bin/console d:m:m          ExÃ©cuter les migrations
  dc exec php php bin/console cache:clear    Vider le cache

  DÃ‰BOGAGE
  â”€â”€â”€â”€â”€â”€â”€â”€
  dc exec php bash                  Shell dans le container
  dc logs php                       Logs PHP/Apache
  dc logs db                        Logs MySQL

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         ğŸ“ URLS IMPORTANTES                      â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

  http://localhost:8000      â†’ Application Symfony
  http://localhost:8080      â†’ phpMyAdmin (root/root)
  http://localhost:8025      â†’ MailHog (emails)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    âš™ï¸ CONFIGURATION SYMFONY                      â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

  symfony/.env :

  DATABASE_URL="mysql://root:root@db:3306/symfony_db?serverVersion=8.0"
                                   ^^
                          â­ Nom du service !

  MAILER_DSN=smtp://mailhog:1025
                    ^^^^^^^
              â­ Nom du service !

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    âš ï¸ PIÃˆGES Ã€ Ã‰VITER                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

  âŒ DATABASE_URL="...@localhost:3306..."
  âœ… DATABASE_URL="...@db:3306..."

  âŒ docker-compose down -v (supprime les donnÃ©es !)
  âœ… docker-compose down (garde les donnÃ©es)

  âŒ Oublier de reconstruire aprÃ¨s modification du Dockerfile
  âœ… docker-compose up -d --build
```

---

## ğŸ—ï¸ CRÃ‰ATION DES SERVICES : GUIDE COMPLET

### ğŸ“‹ STRUCTURE DES FICHIERS

```
Sprint-MiniRSN/
â”œâ”€â”€ docker/
â”‚   â””â”€â”€ php/
â”‚       â””â”€â”€ Dockerfile          â† Configuration de l'image PHP
â”œâ”€â”€ docker-compose.yml          â† Orchestration des services
â””â”€â”€ symfony/                    â† Votre projet Symfony (crÃ©Ã© aprÃ¨s)
```

---

### ğŸ“„ 1. LE DOCKERFILE (docker/php/Dockerfile)

```dockerfile
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# IMAGE DE BASE : PHP avec Apache
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FROM php:8.3-apache
# â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Version de PHP + serveur web intÃ©grÃ©
# â”‚
# â””â”€â–º TÃ©lÃ©charge l'image officielle PHP 8.3 avec Apache depuis Docker Hub
#     Cette image contient :
#     â€¢ PHP 8.3 (interprÃ©teur)
#     â€¢ Apache 2.4 (serveur web)
#     â€¢ Debian Linux (systÃ¨me d'exploitation de base)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INSTALLATION DES DÃ‰PENDANCES SYSTÃˆME
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RUN apt-get update && apt-get install -y \
# â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚        â”‚                 â”‚
# â”‚        â”‚                 â””â”€â–º Installe les paquets suivants
# â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Met Ã  jour la liste des paquets disponibles
# â”‚
# â””â”€â–º RUN = ExÃ©cute une commande PENDANT la construction de l'image

    git \
    # SystÃ¨me de versionnement de code
    # NÃ©cessaire pour : Composer (tÃ©lÃ©chargement de dÃ©pendances depuis GitHub)

    unzip \
    # Utilitaire pour dÃ©compresser des archives .zip
    # NÃ©cessaire pour : Composer (extraction des paquets PHP)

    libicu-dev \
    # BibliothÃ¨que de dÃ©veloppement pour l'internationalisation (i18n)
    # NÃ©cessaire pour : Extension PHP "intl"
    # UtilisÃ©e par Symfony pour : traductions, formatage dates/nombres selon la locale

    libzip-dev \
    # BibliothÃ¨que de dÃ©veloppement pour manipuler les archives ZIP
    # NÃ©cessaire pour : Extension PHP "zip"

    && rm -rf /var/lib/apt/lists/*
    # â””â”€â–º Nettoie le cache apt pour rÃ©duire la taille de l'image
    #     (bonne pratique Docker : garder les images lÃ©gÃ¨res)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INSTALLATION DES EXTENSIONS PHP
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RUN docker-php-ext-install pdo pdo_mysql intl zip opcache
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚           â”‚                        â”‚
# â”‚           â”‚                        â””â”€â–º Liste des extensions Ã  installer
# â”‚           â”‚
# â”‚           â””â”€â–º Script fourni par l'image officielle PHP
# â”‚               pour compiler et installer des extensions
# â”‚
# â””â”€â–º RUN = ExÃ©cute pendant la construction

# DÃ©tail des extensions :
#
# â€¢ pdo (PHP Data Objects)
#   â†’ Interface abstraite pour accÃ©der aux bases de donnÃ©es
#   â†’ UtilisÃ©e par : Doctrine ORM
#
# â€¢ pdo_mysql
#   â†’ Driver MySQL pour PDO
#   â†’ Permet la connexion Ã  MySQL/MariaDB
#
# â€¢ intl (Internationalization)
#   â†’ Fonctions d'internationalisation (traductions, formats)
#   â†’ Requise par : Symfony (gestion des locales)
#
# â€¢ zip
#   â†’ Manipulation d'archives ZIP depuis PHP
#   â†’ UtilisÃ©e par : Composer
#
# â€¢ opcache
#   â†’ Cache de bytecode PHP pour amÃ©liorer les performances
#   â†’ Stocke le code PHP compilÃ© en mÃ©moire


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INSTALLATION DE COMPOSER (gestionnaire de dÃ©pendances PHP)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COPY --from=composer:latest /usr/bin/composer /usr/bin/composer
# â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚            â”‚                      â”‚                   â”‚
# â”‚            â”‚                      â”‚                   â””â”€â–º Destination dans notre image
# â”‚            â”‚                      â”‚
# â”‚            â”‚                      â””â”€â–º Fichier source Ã  copier
# â”‚            â”‚
# â”‚            â””â”€â–º Image source (officielle Composer)
# â”‚
# â””â”€â–º COPY --from = Copie un fichier depuis une autre image Docker
#                   (multi-stage build)

# Explication :
# Au lieu de tÃ©lÃ©charger et installer Composer manuellement,
# on le copie directement depuis l'image officielle "composer:latest".
# C'est plus rapide et plus propre !


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ACTIVATION DU MODULE APACHE REWRITE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RUN a2enmod rewrite
# â”‚  â””â”€â”€â”€â”€â”€â”€â”˜
# â”‚      â”‚
# â”‚      â””â”€â–º Apache2 Enable Module (commande Apache)
# â”‚
# â””â”€â–º Active le module "mod_rewrite" d'Apache

# Pourquoi ?
# Le module "rewrite" permet Ã  Apache de rÃ©Ã©crire les URLs.
# Symfony utilise cela pour :
# â€¢ Rediriger toutes les requÃªtes vers public/index.php
# â€¢ CrÃ©er des URLs "propres" : /users au lieu de /index.php?page=users
#
# Exemple :
# GET /users  â”€â”€(mod_rewrite)â”€â”€â–º /public/index.php


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DÃ‰FINITION DU RÃ‰PERTOIRE DE TRAVAIL
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WORKDIR /var/www/html
# â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚            â”‚
# â”‚            â””â”€â–º Chemin absolu dans le container
# â”‚
# â””â”€â–º Change le rÃ©pertoire de travail pour les commandes suivantes

# ConsÃ©quences :
# â€¢ Toutes les commandes suivantes (RUN, CMD, COPY) seront exÃ©cutÃ©es depuis ce rÃ©pertoire
# â€¢ C'est lÃ  que le volume sera montÃ© (code Symfony)
# â€¢ Apache est configurÃ© pour servir depuis ce rÃ©pertoire par dÃ©faut


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CONFIGURATION DES PERMISSIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RUN chown -R www-data:www-data /var/www/html
# â”‚  â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚     â”‚              â”‚              â”‚
# â”‚     â”‚              â”‚              â””â”€â–º RÃ©pertoire cible
# â”‚     â”‚              â”‚
# â”‚     â”‚              â””â”€â–º PropriÃ©taire:Groupe
# â”‚     â”‚                  (utilisateur Apache par dÃ©faut)
# â”‚     â”‚
# â”‚     â””â”€â–º Change Owner (commande Linux)
# â”‚         -R = RÃ©cursif (tous les sous-dossiers)
# â”‚
# â””â”€â–º Change le propriÃ©taire du rÃ©pertoire

# Pourquoi ?
# â€¢ Apache s'exÃ©cute sous l'utilisateur "www-data" pour la sÃ©curitÃ©
# â€¢ Symfony a besoin d'Ã©crire dans var/cache/ et var/log/
# â€¢ Sans cette ligne, erreurs "Permission denied"


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# EXPOSITION DU PORT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPOSE 80
# â”‚    â””â”€â”˜
# â”‚     â”‚
# â”‚     â””â”€â–º NumÃ©ro de port
# â”‚
# â””â”€â–º Indique que le container Ã©coute sur le port 80

# Important :
# â€¢ C'est une DOCUMENTATION, pas une action
# â€¢ Le port n'est pas rÃ©ellement ouvert automatiquement
# â€¢ Il faut le mapper dans docker-compose.yml : "8000:80"
#
# SchÃ©ma :
# localhost:8000 â”€â”€(mapping)â”€â”€â–º Container:80 â”€â”€â–º Apache


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# COMMANDE PAR DÃ‰FAUT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CMD ["apache2-foreground"]
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# â”‚           â”‚
# â”‚           â””â”€â–º Commande Ã  exÃ©cuter au dÃ©marrage du container
# â”‚
# â””â”€â–º CMD = Commande par dÃ©faut (peut Ãªtre surchargÃ©e)

# Explication :
# â€¢ "apache2-foreground" dÃ©marre Apache en mode foreground (premier plan)
# â€¢ En mode foreground, Apache reste actif et garde le container en vie
# â€¢ Si Apache s'arrÃªte, le container s'arrÃªte aussi
#
# DiffÃ©rence CMD vs RUN :
# â€¢ RUN  : ExÃ©cutÃ© pendant la CONSTRUCTION de l'image
# â€¢ CMD  : ExÃ©cutÃ© au DÃ‰MARRAGE du container
```

---

### ğŸ³ 2. LE DOCKER-COMPOSE.YML

```yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# VERSION DU FORMAT DOCKER COMPOSE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

version: '3.8'
# â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜
#   â”‚       â”‚
#   â”‚       â””â”€â–º NumÃ©ro de version du format de fichier
#   â”‚
#   â””â”€â–º ClÃ© de configuration

# Version 3.8 supporte :
# â€¢ Les dÃ©pendances entre services (depends_on)
# â€¢ Les healthchecks
# â€¢ Les secrets
# â€¢ La plupart des fonctionnalitÃ©s modernes


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DÃ‰FINITION DES SERVICES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
# â””â”€â”€â”€â”€â”€â”€â”˜
#    â”‚
#    â””â”€â–º Section contenant tous les containers Ã  crÃ©er


  # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  # â”‚                    SERVICE 1 : PHP + APACHE                  â”‚
  # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  php:
  # â””â”€â”˜
  #  â”‚
  #  â””â”€â–º Nom du service (libre, mais doit Ãªtre unique)
  #      â€¢ UtilisÃ© pour rÃ©fÃ©rencer le service dans docker-compose
  #      â€¢ Devient le hostname dans le rÃ©seau Docker

    container_name: symfony_php
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #       â”‚              â”‚
    #       â”‚              â””â”€â–º Nom du container (visible avec docker ps)
    #       â”‚
    #       â””â”€â–º ClÃ© de configuration
    #
    # Si omis, Docker Compose gÃ©nÃ¨re un nom automatique :
    # projet_service_1 (ex: sprint-minirsn_php_1)

    build:
    # â””â”€â”€â”€â”˜
    #   â”‚
    #   â””â”€â–º Indique qu'on va CONSTRUIRE une image (au lieu d'en tÃ©lÃ©charger une)

      context: ./docker/php
      # â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #    â”‚          â”‚
      #    â”‚          â””â”€â–º Chemin du rÃ©pertoire de construction (relatif au docker-compose.yml)
      #    â”‚
      #    â””â”€â–º ClÃ© : DÃ©finit le contexte de construction
      #
      # Le contexte est le rÃ©pertoire envoyÃ© au daemon Docker.
      # Tous les chemins dans le Dockerfile sont relatifs Ã  ce contexte.

      dockerfile: Dockerfile
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #     â”‚           â”‚
      #     â”‚           â””â”€â–º Nom du fichier Dockerfile Ã  utiliser
      #     â”‚
      #     â””â”€â–º ClÃ© : SpÃ©cifie le fichier de construction
      #
      # Par dÃ©faut : "Dockerfile"
      # Utile si vous avez plusieurs Dockerfiles (Dockerfile.dev, Dockerfile.prod)

    ports:
    # â””â”€â”€â”€â”˜
    #   â”‚
    #   â””â”€â–º Section de mapping des ports

      - "8000:80"
      # â””â”€â”€â”˜ â””â”€â”˜ â””â”˜
      #   â”‚   â”‚   â”‚
      #   â”‚   â”‚   â””â”€â–º Port DANS le container (oÃ¹ Apache Ã©coute)
      #   â”‚   â”‚
      #   â”‚   â””â”€â”€â”€â”€â”€â–º SÃ©parateur
      #   â”‚
      #   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Port sur VOTRE machine (localhost)
      #
      # SchÃ©ma :
      # Navigateur â†’ localhost:8000 â†’ Docker â†’ Container:80 â†’ Apache

    volumes:
    # â””â”€â”€â”€â”€â”€â”˜
    #    â”‚
    #    â””â”€â–º Section de montage des volumes

      - ./symfony:/var/www/html
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #      â”‚            â”‚
      #      â”‚            â””â”€â–º Chemin DANS le container
      #      â”‚
      #      â””â”€â–º Chemin sur VOTRE machine (relatif au docker-compose.yml)
      #
      # Type : Bind mount (synchronisation en temps rÃ©el)
      # â€¢ Vous modifiez : ./symfony/src/Controller/UserController.php
      # â€¢ Visible dans le container : /var/www/html/src/Controller/UserController.php
      # â€¢ InstantanÃ©ment !

    networks:
    # â””â”€â”€â”€â”€â”€â”€â”˜
    #    â”‚
    #    â””â”€â–º Section des rÃ©seaux auxquels ce service appartient

      - symfony_network
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #        â”‚
      #        â””â”€â–º Nom du rÃ©seau (dÃ©fini en bas du fichier)
      #
      # Tous les services sur ce rÃ©seau peuvent communiquer entre eux
      # via leur nom de service (ex: php, db, mailhog)

    depends_on:
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #     â”‚
    #     â””â”€â–º DÃ©finit les dÃ©pendances de dÃ©marrage

      - db
      # â””â”˜
      #  â”‚
      #  â””â”€â–º Attend que le service "db" soit dÃ©marrÃ© avant de dÃ©marrer
      #
      # âš ï¸ Important :
      # "dÃ©marrÃ©" â‰  "prÃªt Ã  accepter des connexions"
      # Le service PHP peut dÃ©marrer avant que MySQL soit complÃ¨tement initialisÃ©.
      # Solution : Utiliser healthcheck (avancÃ©) ou attendre manuellement.

    environment:
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #      â”‚
    #      â””â”€â–º DÃ©finit des variables d'environnement dans le container

      - PHP_MEMORY_LIMIT=512M
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
      #         â”‚            â”‚
      #         â”‚            â””â”€â–º Valeur
      #         â”‚
      #         â””â”€â–º Nom de la variable
      #
      # Ces variables sont accessibles dans PHP via $_ENV ou getenv()
      # Exemple : getenv('PHP_MEMORY_LIMIT') retourne "512M"


  # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  # â”‚                       SERVICE 2 : MYSQL                      â”‚
  # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  db:
  # â””â”˜
  #  â”‚
  #  â””â”€â–º Nom du service = Hostname dans le rÃ©seau Docker
  #      âš ï¸ C'est ce nom qu'on utilise dans DATABASE_URL !

    container_name: symfony_db
    image: mysql:8.0
    # â””â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #   â”‚        â”‚
    #   â”‚        â””â”€â–º Image Ã  tÃ©lÃ©charger depuis Docker Hub
    #   â”‚
    #   â””â”€â–º ClÃ© : Utilise une image existante (pas de build)
    #
    # Format : repository:tag
    # â€¢ mysql = repository officiel sur Docker Hub
    # â€¢ 8.0 = version (tag)

    environment:
    # Variables d'environnement spÃ©cifiques Ã  MySQL

      MYSQL_ROOT_PASSWORD: root
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”˜
      #          â”‚             â”‚
      #          â”‚             â””â”€â–º Mot de passe du super-utilisateur MySQL
      #          â”‚
      #          â””â”€â–º Variable lue par le script d'initialisation de MySQL
      #
      # Au premier dÃ©marrage, MySQL :
      # â€¢ CrÃ©e l'utilisateur "root"
      # â€¢ DÃ©finit son mot de passe Ã  "root"

      MYSQL_DATABASE: symfony_db
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #       â”‚             â”‚
      #       â”‚             â””â”€â–º Nom de la base de donnÃ©es Ã  crÃ©er
      #       â”‚
      #       â””â”€â–º Variable lue par le script d'initialisation
      #
      # Au premier dÃ©marrage, MySQL crÃ©e automatiquement cette base.

    ports:
      - "3306:3306"
      # â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜
      #   â”‚      â”‚
      #   â”‚      â””â”€â–º Port MySQL dans le container (port par dÃ©faut MySQL)
      #   â”‚
      #   â””â”€â–º Port sur votre machine
      #
      # Ce mapping est OPTIONNEL.
      # Utile si vous voulez vous connecter Ã  MySQL depuis votre machine
      # avec un client comme MySQL Workbench ou DBeaver.
      #
      # âš ï¸ Depuis les autres containers, utilisez : db:3306 (PAS localhost:3306)

    volumes:
      - db_data:/var/lib/mysql
      # â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      #    â”‚            â”‚
      #    â”‚            â””â”€â–º RÃ©pertoire DANS le container oÃ¹ MySQL stocke ses donnÃ©es
      #    â”‚
      #    â””â”€â–º Nom du volume (volume nommÃ©, dÃ©fini en bas du fichier)
      #
      # Type : Volume nommÃ© (gÃ©rÃ© par Docker)
      # â€¢ Les donnÃ©es survivent Ã  la suppression du container
      # â€¢ StockÃ©es dans un endroit gÃ©rÃ© par Docker (pas directement accessible)
      #
      # Cycle de vie :
      # 1. Container crÃ©Ã© â†’ Volume attachÃ©
      # 2. MySQL Ã©crit des donnÃ©es â†’ StockÃ©es dans le volume
      # 3. Container supprimÃ© â†’ Volume persiste
      # 4. Nouveau container crÃ©Ã© â†’ Volume rÃ©attachÃ© â†’ DonnÃ©es rÃ©cupÃ©rÃ©es

    networks:
      - symfony_network
      # ConnectÃ© au mÃªme rÃ©seau que les autres services


  # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  # â”‚                    SERVICE 3 : PHPMYADMIN                    â”‚
  # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  phpmyadmin:
    container_name: symfony_phpmyadmin
    image: phpmyadmin/phpmyadmin
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #            â”‚
    #            â””â”€â–º Image officielle phpMyAdmin

    environment:
      PMA_HOST: db
      # â””â”€â”€â”€â”€â”€â”€â”˜ â””â”˜
      #    â”‚      â”‚
      #    â”‚      â””â”€â–º Valeur : nom du service MySQL (hostname Docker)
      #    â”‚
      #    â””â”€â–º Variable lue par phpMyAdmin pour savoir oÃ¹ se connecter
      #
      # phpMyAdmin va se connecter Ã  "db:3306" (service MySQL)

      PMA_USER: root
      # â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”˜
      #    â”‚      â”‚
      #    â”‚      â””â”€â–º Nom d'utilisateur MySQL (auto-rempli dans l'interface)
      #    â”‚
      #    â””â”€â–º Variable pour la connexion automatique

      PMA_PASSWORD: root
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”˜
      #      â”‚         â”‚
      #      â”‚         â””â”€â–º Mot de passe MySQL
      #      â”‚
      #      â””â”€â–º Variable pour la connexion automatique
      #
      # âš ï¸ En production, ne PAS mettre le mot de passe ici !
      #    Utiliser des secrets Docker ou des variables d'environnement externes.

    ports:
      - "8080:80"
      # â””â”€â”€â”€â”˜  â””â”€â”˜
      #   â”‚     â”‚
      #   â”‚     â””â”€â–º phpMyAdmin Ã©coute sur le port 80 (Apache)
      #   â”‚
      #   â””â”€â–º Accessible sur votre machine via http://localhost:8080

    depends_on:
      - db
      # Attend que MySQL soit dÃ©marrÃ© avant de dÃ©marrer phpMyAdmin

    networks:
      - symfony_network


  # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  # â”‚                     SERVICE 4 : MAILHOG                      â”‚
  # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  mailhog:
    container_name: symfony_mailhog
    image: mailhog/mailhog
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    #        â”‚
    #        â””â”€â–º Image officielle MailHog
    #
    # MailHog est un serveur SMTP de test :
    # â€¢ Intercepte tous les emails
    # â€¢ Ne les envoie PAS rÃ©ellement
    # â€¢ Les affiche dans une interface web

    ports:
      - "1025:1025"
      # â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜
      #   â”‚      â”‚
      #   â”‚      â””â”€â–º Port SMTP dans le container (serveur d'envoi d'emails)
      #   â”‚
      #   â””â”€â–º Port SMTP accessible depuis votre machine
      #
      # Symfony se connecte Ã  : smtp://mailhog:1025

      - "8025:8025"
      # â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜
      #   â”‚      â”‚
      #   â”‚      â””â”€â–º Port de l'interface web dans le container
      #   â”‚
      #   â””â”€â–º Interface accessible via http://localhost:8025
      #
      # Vous pouvez voir tous les emails interceptÃ©s ici !

    networks:
      - symfony_network


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DÃ‰FINITION DES RÃ‰SEAUX
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

networks:
# â””â”€â”€â”€â”€â”€â”€â”˜
#    â”‚
#    â””â”€â–º Section de dÃ©finition des rÃ©seaux

  symfony_network:
  # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  #        â”‚
  #        â””â”€â–º Nom du rÃ©seau (rÃ©fÃ©rencÃ© dans chaque service)

    driver: bridge
    # â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
    #   â”‚      â”‚
    #   â”‚      â””â”€â–º Type de rÃ©seau
    #   â”‚
    #   â””â”€â–º ClÃ© : SpÃ©cifie le driver rÃ©seau
    #
    # Driver "bridge" :
    # â€¢ CrÃ©e un rÃ©seau privÃ© virtuel pour les containers
    # â€¢ Les containers peuvent communiquer entre eux via leur nom de service
    # â€¢ Isolation : les containers sur des rÃ©seaux diffÃ©rents ne peuvent pas communiquer
    #
    # SchÃ©ma :
    # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    # â”‚   RÃ©seau : symfony_network      â”‚
    # â”‚                                 â”‚
    # â”‚   â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    # â”‚   â”‚php â”‚  â”‚ db â”‚  â”‚mailhog â”‚   â”‚
    # â”‚   â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    # â”‚     â–²       â–²         â–²        â”‚
    # â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
    # â”‚    Peuvent communiquer         â”‚
    # â”‚    via leurs noms              â”‚
    # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DÃ‰FINITION DES VOLUMES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

volumes:
# â””â”€â”€â”€â”€â”€â”˜
#    â”‚
#    â””â”€â–º Section de dÃ©finition des volumes nommÃ©s

  db_data:
  # â””â”€â”€â”€â”€â”€â”€â”˜
  #    â”‚
  #    â””â”€â–º Nom du volume (rÃ©fÃ©rencÃ© dans le service "db")
  #
  # Volume nommÃ© gÃ©rÃ© par Docker :
  # â€¢ Docker crÃ©e et gÃ¨re ce volume automatiquement
  # â€¢ StockÃ© dans : C:\ProgramData\docker\volumes\db_data\ (Windows)
  #                 /var/lib/docker/volumes/db_data/ (Linux)
  # â€¢ Persiste mÃªme si le container est supprimÃ©
  # â€¢ SupprimÃ© uniquement avec : docker-compose down -v
  #
  # SchÃ©ma du cycle de vie :
  #
  # 1. Premier docker-compose up
  #    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  #    â”‚Container â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ Volume  â”‚  (crÃ©Ã© vide)
  #    â”‚  MySQL   â”‚       â”‚ db_data â”‚
  #    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  #         â”‚
  #         â””â”€â–º Ã‰crit des donnÃ©es
  #
  # 2. docker-compose down
  #    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  #    â”‚    ğŸ’€    â”‚       â”‚ Volume  â”‚  (donnÃ©es conservÃ©es)
  #    â”‚ Containerâ”‚   X   â”‚ db_data â”‚
  #    â”‚ supprimÃ© â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  #    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  #
  # 3. Nouveau docker-compose up
  #    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  #    â”‚Container â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ Volume  â”‚  (donnÃ©es rÃ©cupÃ©rÃ©es !)
  #    â”‚  MySQL   â”‚       â”‚ db_data â”‚
  #    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ¯ RÃ‰SUMÃ‰ : ORDRE DE CRÃ‰ATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ã‰TAPES DE MISE EN PLACE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ CRÃ‰ER LA STRUCTURE

   Sprint-MiniRSN/
   â”œâ”€â”€ docker/
   â”‚   â””â”€â”€ php/
   â”‚       â””â”€â”€ Dockerfile        â† CrÃ©er ce fichier
   â””â”€â”€ docker-compose.yml        â† CrÃ©er ce fichier


2ï¸âƒ£ CONSTRUIRE ET DÃ‰MARRER

   Terminal : docker-compose up -d --build

   Ce qui se passe :
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. Lecture du docker-compose.yml                    â”‚
   â”‚ 2. Construction de l'image PHP (Dockerfile)         â”‚
   â”‚ 3. TÃ©lÃ©chargement des images MySQL, phpMyAdmin...   â”‚
   â”‚ 4. CrÃ©ation du rÃ©seau "symfony_network"             â”‚
   â”‚ 5. CrÃ©ation du volume "db_data"                     â”‚
   â”‚ 6. DÃ©marrage des 4 containers                       â”‚
   â”‚    â”œâ”€â”€ symfony_php                                  â”‚
   â”‚    â”œâ”€â”€ symfony_db                                   â”‚
   â”‚    â”œâ”€â”€ symfony_phpmyadmin                           â”‚
   â”‚    â””â”€â”€ symfony_mailhog                              â”‚
   â”‚ 7. Connexion des containers au rÃ©seau               â”‚
   â”‚ 8. Montage des volumes                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3ï¸âƒ£ CRÃ‰ER LE PROJET SYMFONY

   Terminal : docker-compose exec php composer create-project symfony/skeleton symfony

   Ce qui se passe :
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Composer s'exÃ©cute DANS le container PHP          â”‚
   â”‚ â€¢ TÃ©lÃ©charge Symfony depuis Packagist               â”‚
   â”‚ â€¢ CrÃ©e le projet dans /var/www/html/symfony          â”‚
   â”‚ â€¢ GrÃ¢ce au bind mount, visible dans ./symfony/       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


4ï¸âƒ£ CONFIGURER SYMFONY

   Ã‰diter : symfony/.env

   DATABASE_URL="mysql://root:root@db:3306/symfony_db?serverVersion=8.0"
                                    ^^
                            Nom du service Docker !


5ï¸âƒ£ TESTER

   Navigateur : http://localhost:8000

   âœ… Vous devriez voir la page d'accueil Symfony !
```

---

### ğŸ” COMPARAISON : Build vs Image

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         build: (PHP)                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  php:
    build:
      context: ./docker/php
      dockerfile: Dockerfile

Utilisation : Quand vous avez des besoins spÃ©cifiques

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Avantages :                                                      â”‚
â”‚ âœ… Personnalisation totale (extensions PHP, config...)           â”‚
â”‚ âœ… Optimisation pour votre projet                                â”‚
â”‚ âœ… ContrÃ´le sur chaque couche                                    â”‚
â”‚                                                                  â”‚
â”‚ InconvÃ©nients :                                                  â”‚
â”‚ âš ï¸  Temps de construction initial                                â”‚
â”‚ âš ï¸  NÃ©cessite de comprendre le Dockerfile                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      image: (MySQL, phpMyAdmin)                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  db:
    image: mysql:8.0

Utilisation : Quand une image officielle suffit

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Avantages :                                                      â”‚
â”‚ âœ… DÃ©marrage immÃ©diat (image dÃ©jÃ  construite)                    â”‚
â”‚ âœ… Maintenu par la communautÃ© officielle                         â”‚
â”‚ âœ… Pas de Dockerfile Ã  gÃ©rer                                     â”‚
â”‚                                                                  â”‚
â”‚ InconvÃ©nients :                                                  â”‚
â”‚ âš ï¸  Moins de personnalisation                                    â”‚
â”‚ âš ï¸  Configuration via variables d'environnement uniquement       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ’¡ CONCEPTS CLÃ‰S Ã€ RETENIR

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                   DOCKERFILE vs DOCKER-COMPOSE                  â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ DOCKERFILE                                                    â•‘
â•‘ â€¢ DÃ©finit UNE image (recette de cuisine)                      â•‘
â•‘ â€¢ UtilisÃ© avec : docker build                                 â•‘
â•‘ â€¢ Instructions : FROM, RUN, COPY, CMD...                      â•‘
â•‘ â€¢ Exemple : "Comment construire mon image PHP personnalisÃ©e"  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ DOCKER-COMPOSE.YML                                            â•‘
â•‘ â€¢ Orchestre PLUSIEURS services (menu complet)                 â•‘
â•‘ â€¢ UtilisÃ© avec : docker-compose up                            â•‘
â•‘ â€¢ ClÃ©s : services, networks, volumes                          â•‘
â•‘ â€¢ Exemple : "Comment faire fonctionner PHP + MySQL ensemble"  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                        TYPES DE VOLUMES                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ BIND MOUNT : ./symfony:/var/www/html                          â•‘
â•‘ â€¢ Synchronisation en temps rÃ©el                               â•‘
â•‘ â€¢ Vous contrÃ´lez l'emplacement (dossier sur votre machine)    â•‘
â•‘ â€¢ UtilisÃ© pour : Code source, configuration                   â•‘
â•‘ â€¢ Modifiable depuis votre IDE                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ VOLUME NOMMÃ‰ : db_data:/var/lib/mysql                         â•‘
â•‘ â€¢ GÃ©rÃ© par Docker                                             â•‘
â•‘ â€¢ Persist aprÃ¨s suppression du container                      â•‘
â•‘ â€¢ UtilisÃ© pour : DonnÃ©es de base de donnÃ©es                   â•‘
â•‘ â€¢ Non directement modifiable (gÃ©rÃ© par Docker)                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                        RÃ‰SEAU DOCKER                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

DNS Automatique :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nom du service = Hostname                                    â”‚
â”‚                                                              â”‚
â”‚ Service "db" â†’ Accessible via "db" depuis les autres        â”‚
â”‚                containers sur le mÃªme rÃ©seau                 â”‚
â”‚                                                              â”‚
â”‚ Service "php" â†’ Accessible via "php"                         â”‚
â”‚ Service "mailhog" â†’ Accessible via "mailhog"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Isolation :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Containers sur des rÃ©seaux diffÃ©rents = Pas de communicationâ”‚
â”‚ Containers sur le mÃªme rÃ©seau = Communication possible      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ğŸ¨ Version visuelle crÃ©Ã©e - Bonne rÃ©vision ! ğŸ“š**
